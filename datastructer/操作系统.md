# 操作系统

## 操作系统概念

操作系统是  **直接控制和利用**  各种软硬件资源 **以方便用户充分有效利用这些资源** ==的程序的集合==

==操作系统是紧靠硬件的第一层软件==

## 操作系统的地位

裸机的使用是不方便的在裸机之上装配一些基本的控制软件，让这些软件自动完成基本功能在这些软件的基础之上进行扩充和完善，提供给用户所要求的功能

## 操作系统的作用

### 要求

#### **提供使用接口**

接口位置：硬件系统与用户之间

接口作用： 用户角度：用户可以通过接口获得使用·访问资源的能力

系统角度：系统有序管理计算机资源前提下，向用户提供接口 

#### **管理系统资源**

处理器（CPU）管理：记录处理器状态，按策略分配处理器

存储器管理：记录存储器状态，按策略分配，保护存储的信息不被破坏

I/O管理：按策略和要求分配设备，优化设备调度，调高设备使用效率

信息管理：以文件形式组织信息，方便访问和存储

裸机能力扩展

## 操作系统分类

### 单道批处理系统

作业==成批==进入系统后备队列

按照一定的策略调度==一个作业==在系统中运行

**特点**

内存中只保持==一道==作业运行

作业完成顺序与其==进入内存的顺序直接相关==

### 多道批处理系统

作业==成批==进入系统后备队列

按照一定的策略调度==多个作业==在系统中运行

进一步提高系统吞吐量和利用率

提高CPU利用率

提高内存，I/O设备利用率

作业完成顺序与进入内存顺序无关

==调入和调出可以和处理并行==

**无人机交互**

### 分时系统

解决==**人机交互**==，进行及时响应，==**共享主机**==

时间片的选择：

太大：及时交互性效果不明显

太小：作业频繁切换，增加系统开销

**几十到几百毫秒之间**

#### 特点

多路性

独立性

及时性

交互性

**==所有任务优先级相同==**

### 实时系统

最大特点：==及时性==

### 操作系统发展

#### 微机操作系统

单用户单任务

单用户多任务

多用户多任务：Linux，Win10，MACOS

#### 网络操作系统

支持网络的操作系统

网络通信，网络资源管理、网络服务，客户/服务器模式的互操作

#### 分布式操作系统

拆分任务，多台计算机共同完成，各计算机平行，独立，具有并行性

## 操作系统特征

### 并发性

并行：在某时刻同时进行

并发：在某时段同时进行

程序并发可以大大提高资源利用率，在某时段内多个程序可以同时完成

### 共享性

资源可供多个并发程序共享使用

#### **==共享性与并发性互为条件==**

共享对资源进行合理调配使得一个作业在使用I/O资源时其他作业可以使用CPU--并发性

程序并发执行，在一段时间内资源被几个作业同时使用--共享性

### 虚拟性

通过一定技术把一个物理实体变成几个逻辑对应物

### 异步

程序执行的异步性：进程以不可预知的速度推进

**内存中的每个进程何时执行,何时暂停,以怎样的速度向前推进,每道程序总共需要多少时间才能完成等,都是不可预知的。**

## 进程引入

程序：指令的集合

### 程序间的顺序执行

前一程序执行完后才执行后一程序，且执行时独占资源，具有可再现性

### 程序间并发执行

**由于多道程序中IK、CJ与PL之间不存在前趋关系，程序之间可以并发执行**

**具有执行的间断性**

**资源非封闭性**

由于具有资源的非封闭性，==任何程序可能会改变程序状态==，**故具有不可再现性**

### 进程定义

可==并发执行的程序在一个数据集合上的运行过程==，是系统进行资源分配和调度的一个独立单位

PCB：进程控制中心

### 进程状态

就绪态：已获取除CPU外一切资源

执行态：正在CPU中运行

阻塞态：由于等待某事件而不能执行

当中断或时间片用完时会由执行态切换到就绪态，当需要等待I/O或某事件时会进入阻塞态

**由执行态进入阻塞态是进程主动的，由执行态进入就绪态是系统调配的**

==就绪态不会进入阻塞态==

==阻塞态不会进入执行态==

### 挂起状态（给进程拍照）

正在执行的进程暂停执行，就绪态不会进入执行态，阻塞态即使阻塞事件释放也不会继续执行

原因：观察检测

### PCB（进程控制块）

PCB是纪录**进程动态特性**，**运行控制等信息的数据结构**

### 进程标识符

识别进程唯一标志

内部标识符：一串数字，给系统看

外部标识符：一串字符，给管理员看

#### CPU现场

进程将要暂停时CPU的工作状态

程序指令计数器各种寄存器：AX，BX，bp栈顶寄存器等程序状态字

### 进程状态

### 优先级

### 资源清单

### 通信机制

### 同步机制



## 进程的创建

申请空白PCB

分配资源

初始化PCB

插入就绪队列

==进程创建实质上是生成一个PCB并将其插入就绪队列==

## 进程的终止

查找进程PCB

停止执行

终止子进程

归还资源

将PCB移除队列

清除PCB

## 进程同步

进程间相互协作，资源有效共享，==**结果可再现**==

### 两种关系：互斥关系，同步关系



### 临界资源

==一次只能被一个进程占用的资源称为临界资源==

临界资源的访问必须是互斥进行的，即当一个临界资源被占用时，另一个申请这个临界资源的进程被阻塞

#### 临界区

每个进程用于访问临界资源的那段程序

#### 同步机制遵循的原则

空闲让进

忙则等待

有限等待：保证在一段时间内进程能访问临界资源

让权等待：当访问不了临界资源时，及时释放让后面的进程访问

#### 锁机制

通过标志量标示此临界资源是否被访问

锁机制特点：实现了进程互斥访问临界资源。

不遵循让权等待原则。——忙等

#### 信号量机制

##### 信号量

